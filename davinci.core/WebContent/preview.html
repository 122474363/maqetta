<!DOCTYPE html>
<html manifest="app/davinci/davinci.manifest">
  <head>
    <title>Maqetta Previewer</title>
	<meta http-equiv="Cache-Control" CONTENT="no-store, no-cache, must-revalidate">
	<meta http-equiv="Cache-Control" CONTENT="post-check=0, pre-check=0", FALSE">
	<meta http-equiv="Pragma" CONTENT="no-cache">
    <script type="text/javascript" src="../../../../app/dojo/dojo.js" djConfig="parseOnLoad: true"></script>
    <script type="text/javascript" src="../../../../app/dijit/dijit.js"></script>

  </head>
	<script>
    	dojo.require("dojo.cookie");      
		function populate(){
			var theDiv = dojo.byId('display');
			theDiv.innerHTML = dojo.cookie("preview");
			var previewUrl = location.href;
			/* Strip out URL params */
			previewUrl = previewUrl.substring(0,previewUrl.lastIndexOf("?"));
			var previewDiv = dojo.byId('previewFrame');
			var previewIframe = dojo.doc.createElement("iframe");
			dojo.style(previewIframe, "width", "500px");
			dojo.style(previewIframe, "height", "500px");
			previewIframe.src = previewUrl;
			
			previewDiv.appendChild(previewIframe)
			
		}
		dojo.addOnLoad(populate );
	</script>
	<body class="claro">
		<h2>Davinci Previewer.</h2><br>
		
		I am <b>preview.html</b>
		<br><br>
		And I read the cookie: <b>preview=<span id='display'></span></b> (proxied through the servlet from the ?preview= param)
		
		<div id='previewFrame'></div>
		
		

	</body>
</html>
