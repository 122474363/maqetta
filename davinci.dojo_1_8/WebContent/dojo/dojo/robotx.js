/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
define("dojo/robotx",["doh/main","./aspect","./dom-construct","./dom-style","./_base/kernel","./_base/lang","./on","./ready","./robot","./sniff","./_base/window"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a){_5.experimental("dojo.robotx");var _b=null;_5.config.debugHeight=_5.config.debugHeight||200;var _c;var _d=_2.after(_1,"_groupStarted",function(){_d.remove();_b.style.visibility="visible";_b.style.visibility="visible";},true);var _e;var _f=function(url){_7(function(){var _10={overflow:_9("webkit")?"hidden":"visible",margin:"0px",borderWidth:"0px",height:"100%",width:"100%"};_4.set(document.documentElement,_10);_4.set(document.body,_10);_b=document.createElement("iframe");_b.src=url;_b.setAttribute("ALLOWTRANSPARENCY","true");_b.scrolling=_9("ie")?"yes":"auto";var _11=document.compatMode=="BackCompat"?document.body:document.documentElement;var _12=(document.getElementById("firebug")||{}).offsetHeight||0;_4.set(_b,{visibility:"hidden",border:"0px none",padding:"0px",margin:"0px",width:"100%",height:_12?(_11.clientHeight-_12)+"px":"100%"});if(_b.attachEvent!==undefined){_b.attachEvent("onload",_e);}else{on(_b,"load",_e);}_3.place(_b,_a.body(),"first");});};var _13=false;var _14=null;var _15=_8._run;_8._run=function(_16){_13=true;_14=_16;_8._run=_15;if(_c){_f(_c);}};var _17=function(){_8._updateDocument();_17=null;if(_b.contentWindow.require){_b.contentWindow.require(["dojo/ready"],function(_18){_18(999,function(){_8._run(_14);});});}else{_8._run(_14);}};_e=function(){if(_17){_17();}var _19=on(_a.body(),"onunload",function(){_5.setContext(window,document);_19.remove();});};_6.mixin(_8,{_updateDocument:function(){_5.setContext(_b.contentWindow,_b.contentWindow.document);_8.window=_b.contentWindow;_8.doc=_b.contentWindow.document;var win=_5.global;if(win.dojo){_5.publish=win.dojo.publish;_5.subscribe=win.dojo.subscribe;_5.connectPublisher=win.dojo.connectPublisher;}},initRobot:function(url){if(_13){_f(url);}else{_c=url;}},waitForPageToLoad:function(_1a){var d=new _1.Deferred();_17=function(){_17=null;_8._updateDocument();d.callback(true);};_1a();return d;}});return _8;});