/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
define("dojo/request/util",["exports","require","../Deferred","../io-query","../_base/array","../_base/lang"],function(_1,_2,_3,_4,_5,_6){_1.deepCopy=function deepCopy(_7,_8){for(var _9 in _8){var _a=_7[_9],_b=_8[_9];if(_a!==_b){if(_a&&typeof _a==="object"&&_b&&typeof _b==="object"){_1.deepCopy(_a,_b);}else{_7[_9]=_b;}}}return _7;};_1.deepCreate=function deepCreate(_c,_d){_d=_d||{};var _e=_6.delegate(_c),_f,_10;for(_f in _c){_10=_c[_f];if(_10&&typeof _10==="object"){_e[_f]=_1.deepCreate(_10,_d[_f]);}}return _1.deepCopy(_e,_d);};var _11=Object.freeze||function(obj){return obj;};function _12(_13){return _11(_13);};_1.deferred=function deferred(_14,_15,_16,_17,_18,_19){var def=new _3(function(_1a){_15&&_15(def,_14);var err=_14.error;if(!err){err=new Error("request canceled");err.response=_14;err.dojoType="cancel";}return err;});def.response=_14;def.isValid=_16;def.isReady=_17;def.handleResponse=_18;function _1b(_1c){_1c.response=_14;throw _1c;};var _1d=def.then(_12).otherwise(_1b);try{var _1e=_2("./notify");_1d.then(_1e.load,_1e.error);}catch(e){}if(_19){def.then(function(_1f){_19.call(def,_1f);},function(_20){_19.call(def,_14,_20);});}def.promise=_1d;def.then=_1d.then;return def;};_1.addCommonMethods=function addCommonMethods(_21,_22){_5.forEach(_22||["GET","POST","PUT","DELETE"],function(_23){_21[(_23==="DELETE"?"DEL":_23).toLowerCase()]=function(url,_24){_24=_6.delegate(_24||{});_24.method=_23;return _21(url,_24);};});};_1.parseArgs=function parseArgs(url,_25,_26){var _27=_25.data,_28=_25.query;if(_27&&!_26){if(typeof _27==="object"){_25.data=_4.objectToQuery(_27);}}if(_28){if(typeof _28==="object"){_28=_4.objectToQuery(_28);}if(_25.preventCache){_28+=(_28?"&":"")+"request.preventCache="+(+(new Date));}}else{if(_25.preventCache){_28="request.preventCache="+(+(new Date));}}if(url&&_28){url+=(~url.indexOf("?")?"&":"?")+_28;}return {url:url,options:_25};};_1.checkStatus=function(_29){_29=_29||0;return (_29>=200&&_29<300)||_29===304||_29===1223||!_29;};});