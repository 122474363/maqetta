//>>built
define("dojox/dgauges/GaugeBase",["dojo/_base/lang","dojo/_base/declare","dojo/dom-geometry","dijit/registry","dijit/_WidgetBase","dojo/_base/html","dojo/_base/event","dojox/gfx","dojox/widget/_Invalidating","./ScaleBase"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _2("dojox.dgauges.GaugeBase",[_5,_9],{_elements:null,_scales:null,_elementsIndex:null,_elementsRenderers:null,_gfxGroup:null,_mouseShield:null,_widgetBox:null,_node:null,value:0,font:null,constructor:function(_b,_c){this._addGroupBoundingBoxSupport();this.font={family:"Helvetica",style:"normal",variant:"small-caps",weight:"bold",size:"10pt",color:"black"};this._elements=[];this._scales=[];this._elementsIndex={};this._elementsRenderers={};this._node=_4.byId(_c);var _d=_6.getMarginBox(_c);this.surface=_8.createSurface(this._node,_d.w||1,_d.h||1);this._widgetBox=_d;this._baseGroup=this.surface.createGroup();this._mouseShield=this._baseGroup.createGroup();this._gfxGroup=this._baseGroup.createGroup();},_setCursor:function(_e){if(this._node){this._node.style.cursor=_e;}},_addGroupBoundingBoxSupport:function(){dojox.gfx.addRect=function(a,b){if(a===null&&b===null){return null;}if(a===null&&b!==null){return b;}if(b===null){return a;}var _f=Math.min(a.x,b.x);var _10=Math.max(a.x+a.width,b.x+b.width);var _11=Math.min(a.y,b.y);var _12=Math.max(a.y+a.height,b.y+b.height);return {x:_f,y:_11,width:_10-_f,height:_12-_11};};dojo.extend(dojox.gfx.matrix.Matrix2D,{isIdentity:function(){return this.xy===0&&this.yx===0&&this.xx===1&&this.yy===1&&this.dx===0&&this.dy===0;},transformRectangle:function(_13){_13=_13||{x:0,y:0,width:0,height:0};if(this.isIdentity()){return {"x":_13.x,"y":_13.y,"width":_13.width,"height":_13.height};}var m=dojox.gfx.matrix;var p0=m.multiplyPoint(this,_13.x,_13.y);var p1=m.multiplyPoint(this,_13.x,_13.y+_13.height);var p2=m.multiplyPoint(this,_13.x+_13.width,_13.y);var p3=m.multiplyPoint(this,_13.x+_13.width,_13.y+_13.height);var _14=Math.min(p0.x,Math.min(p1.x,Math.min(p2.x,p3.x)));var _15=Math.min(p0.y,Math.min(p1.y,Math.min(p2.y,p3.y)));var _16=Math.max(p0.x,Math.max(p1.x,Math.max(p2.x,p3.x)));var _17=Math.max(p0.y,Math.max(p1.y,Math.max(p2.y,p3.y)));var r={};r.x=_14;r.y=_15;r.width=_16-_14;r.height=_17-_15;return r;}});dojo.extend(dojox.gfx.Group,{getBoundingBox:function(){var bb=null;var cs=this.children;var ncs=this.children.length;var c;for(var i=0;i<ncs;++i){var c=cs[i];var cbb=c.getBoundingBox();if(!cbb){continue;}var ct=c.getTransform();if(ct&&!ct.isIdentity()){cbb=ct.transformRectangle(cbb);}bb=bb?dojox.gfx.addRect(bb,cbb):cbb;}return bb;}});},_computeBoundingBox:function(_18){return _18?_18.getBoundingBox():{x:0,y:0,width:0,height:0};},destroy:function(){this.surface.destroy();},resize:function(_19,_1a){var box;switch(arguments.length){case 1:box=_1.mixin({},_19);_3.setMarginBox(this._node,box);break;case 2:box={w:_19,h:_1a};_3.setMarginBox(this._node,box);break;}box=_3.getMarginBox(this._node);this._widgetBox=box;var d=this.surface.getDimensions();if(d.width!=box.w||d.height!=box.h){this.surface.setDimensions(box.w,box.h);this._mouseShield.clear();this._mouseShield.createRect({x:0,y:0,width:box.w,height:box.h}).setFill([0,0,0,0]);return this.invalidateRendering();}else{return this;}},addElement:function(_1b,_1c){if(this._elementsIndex[_1b]&&this._elementsIndex[_1b]!=_1c){this.removeElement(_1b);}if(_1.isFunction(_1c)){var _1d={};_1.mixin(_1d,new _9());_1d._name=_1b;_1d._gfxGroup=this._gfxGroup.createGroup();_1d.width=0;_1d.height=0;_1d._isGFX=true;_1d.refreshRendering=function(){_1d._gfxGroup.clear();return _1c(_1d._gfxGroup,_1d.width,_1d.height);};this._elements.push(_1d);this._elementsIndex[_1b]=_1d;}else{_1c._name=_1b;_1c._gfxGroup=this._gfxGroup.createGroup();_1c._gauge=this;this._elements.push(_1c);this._elementsIndex[_1b]=_1c;if(_1c instanceof _a){this._scales.push(_1c);}}return this.invalidateRendering();},removeElement:function(_1e){element=this._elementsIndex[_1e];if(element){element._gfxGroup.removeShape();var idx=this._elements.indexOf(element);this._elements.splice(idx,1);if(element instanceof _a){var _1f=this._scales.indexOf(element);this._scales.splice(_1f,1);}delete this._elementsIndex[_1e];delete this._elementsRenderers[_1e];}this.invalidateRendering();return element;},getElement:function(_20){return this._elementsIndex[_20];},getElementRenderer:function(_21){return this._elementsRenderers[_21];},onStartEditing:function(_22){},onEndEditing:function(_23){}});});